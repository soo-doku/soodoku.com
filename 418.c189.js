(()=>{"use strict";var e,t,r={9418:(e,t,r)=>{var o=r(4572);r(3948),r(7658),r(1703),r(2707);const n=(e,t)=>[...Array(e).keys()].map((e=>t(e))),i=n(9,(e=>e+1)),s={getRow:e=>e%9,getCol:e=>Math.floor(e/9),getIndex:(e,t)=>9*t+e,getZone:(e,t)=>{const r=void 0===t?e:9*t+e,o=s.getRow(r),n=s.getCol(r),i=Math.floor(n/3);return 3*Math.floor(o/3)+i},getZoneIndexs:(e=0)=>{let t=[0,1,2],r=[0,1,2],o=[];for(let n in r){let i=r[n];for(let r in t){let n=t[r];o.push(9*(i+3*Math.floor(e/3))+(n+e%3*3))}}return o}},l=e=>{const t=null==e?0:e.length;if(!t)return[];let r=-1;const o=t-1,n=[].concat(e);for(;++r<t;){const e=r+Math.floor(Math.random()*(o-r+1)),t=n[e];n[e]=n[r],n[r]=t}return n},u=(e,t,r,o,n,i)=>{let l,a=s.getRow(n),f=s.getCol(n),h=s.getZone(n);if(n>=81)return!0;if(-1!==e[n])return u(e,t,r,o,n+1,i);for(let s in i)if(l=i[s],!t[a][l]&&!r[f][l]&&!o[h][l]){if(e[n]=l,t[a][l]=!0,r[f][l]=!0,o[h][l]=!0,u(e,t,r,o,n+1,i))return!0;e[n]=-1,t[a][l]=!1,r[f][l]=!1,o[h][l]=!1}return!1},a=(e,t,r,o,n,i,l)=>{if(l.finishes>1)return;if(n>=81){for(let t=0;t<e.length;++t)if(-1==e[t])return;return l.finishes++,void(l.answer=e)}let u,f=s.getRow(n),h=s.getCol(n),c=s.getZone(n);if(-1===e[n])for(let s in i)u=i[s],t[f][u]||r[h][u]||o[c][u]||(e[n]=u,t[f][u]=!0,r[h][u]=!0,o[c][u]=!0,a([...e],[...t],[...r],[...o],n+1,i,l),e[n]=-1,t[f][u]=!1,r[h][u]=!1,o[c][u]=!1);else a(e,t,r,o,n+1,i,l)};class f{constructor(e,t=!1){if((0,o.Z)(this,"puzzle",void 0),(0,o.Z)(this,"answer",void 0),(0,o.Z)(this,"timecount",void 0),this.puzzle=e,!e||81!=e.length)throw new Error("is not a 9 * 9 matrix sudoku puzzle");let r,f,h,c=[],g=n(9,(()=>n(10,(()=>!1)))),p=n(9,(()=>n(10,(()=>!1)))),d=n(9,(()=>n(10,(()=>!1))));this.puzzle.forEach(((e,t)=>{r=s.getRow(t),f=s.getCol(t),h=s.getZone(t),-1!==e&&(g[r][e]=!0,p[f][e]=!0,d[h][e]=!0),c.push(e)}));let w=!1;const v=(new Date).getTime();let m=l(i),b=-1;for(let e=0;e<81;++e)if(-1===c[e]){b=e;break}if(t){const e={count:0,finishes:0};if(a(c,g,p,d,b,m,e),e.finishes>1)throw new Error("puzzle is not one-solution sudoku");0==e.finishes?w=!1:(c=e.answer,w=!0)}else w=u(c,g,p,d,b,m);if(!w)throw new Error("not found the solution. is that you give me the puzzle with mistake?");this.answer=c,this.timecount=(new Date).getTime()-v}getPuzzle(){return this.puzzle}getSolution(){return this.answer}}const h=(e,t)=>{t>=10&&(console.log(`reduce the difficulty : ${81-e} -> ${81-(e-2)}`),t=1,e-=2);let r=0,o=l(n(9,(e=>e))),i=n(81,(e=>4==s.getZone(e%9,e/9)?o[r++]+1:-1)),u=((e,t)=>{const r=n(9,(e=>s.getZoneIndexs(e)[Math.random()])).sort(),o=[];e.map(((e,t)=>{r.length>0&&r[0]==t?r.splice(0,1):o.push(t)}));let i=l(o),u=0;for(let r in i){if(u>=t)break;let o=i[r];if(-1!=e[o]){let t=e[o];e[o]=-1;try{u++,new f(e,!0)}catch(r){e[o]=t,u--}}}return u==t?e:[]})(new f(i).getSolution(),e);return 0===u.length?h(e,t+1):u};onmessage=function({data:e}){postMessage(((e=30)=>{const t=Math.max(Math.min(Math.round(e),70),23);return h(81-t,1)})(Number.isNaN(e)?30:e).map((e=>-1===e?0:e)))}}},o={};function n(e){var t=o[e];if(void 0!==t)return t.exports;var i=o[e]={exports:{}};return r[e].call(i.exports,i,i.exports,n),i.exports}n.m=r,n.x=()=>{var e=n.O(void 0,[321,977],(()=>n(9418)));return n.O(e)},e=[],n.O=(t,r,o,i)=>{if(!r){var s=1/0;for(f=0;f<e.length;f++){for(var[r,o,i]=e[f],l=!0,u=0;u<r.length;u++)(!1&i||s>=i)&&Object.keys(n.O).every((e=>n.O[e](r[u])))?r.splice(u--,1):(l=!1,i<s&&(s=i));if(l){e.splice(f--,1);var a=o();void 0!==a&&(t=a)}}return t}i=i||0;for(var f=e.length;f>0&&e[f-1][2]>i;f--)e[f]=e[f-1];e[f]=[r,o,i]},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>({321:"core",977:"libs"}[e]+"."+{321:"5451",977:"f2da"}[e]+".js"),n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.p="/",(()=>{var e={418:1};n.f.i=(t,r)=>{e[t]||importScripts(n.p+n.u(t))};var t=self.webpackChunksudoku=self.webpackChunksudoku||[],r=t.push.bind(t);t.push=t=>{var[o,i,s]=t;for(var l in i)n.o(i,l)&&(n.m[l]=i[l]);for(s&&s(n);o.length;)e[o.pop()]=1;r(t)}})(),t=n.x,n.x=()=>Promise.all([n.e(321),n.e(977)]).then(t),n.x()})();